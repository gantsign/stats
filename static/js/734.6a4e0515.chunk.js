"use strict";(self.webpackChunkstats=self.webpackChunkstats||[]).push([[734],{1734:(t,e,s)=>{s.r(e),s.d(e,{default:()=>S});var o=s(5043),r=s(631),a=s(5115),n=s(8029),i=s(7243),h=s(5966),p=s(7339),c=s(3819),d=s(4144),l=s(9255),u=s(4944),m=s(2831),x=s(2805),y=s(1467),v=s(579);const g=s(1554),j=(0,x.A)(g);class A extends o.Component{constructor(){super(...arguments),this.onResize=t=>{const e=t.bounds;e&&this.setState({width:e.width,height:e.height})}}render(){const t=this.props.repositoryName,e=this.props.variant,s="count"===e?"downloads_count":"downloads_delta",o="count"===e?"Download count":"Downloads / day",r=this.props.downloadsDf.where((e=>e.repository_name===t)).setIndex("data_at").subset([s]),a=[{x:r.getIndex().toArray(),y:r.getSeries(s).toArray(),type:"scatter"}];return(0,v.jsx)(y.A,{bounds:!0,onResize:this.onResize,children:e=>{let{measureRef:s}=e;const r=this.state||{width:800,height:600},n={width:r.width,height:r.height,title:t,xaxis:{title:"Date"},yaxis:{title:o}};return(0,v.jsx)("div",{ref:s,style:{height:"100%"},children:(0,v.jsx)(j,{data:a,layout:n})})}})}}const w=A;var C=s(7780),N=s(3903);function f(t){return(0,v.jsx)(r.A,{direction:"up",...t})}class D extends o.Component{constructor(){super(...arguments),this.repoChanged=t=>{const e=this.state;if(!e)return;const s=String(t.target.value),o=e.variant;this.setState({repositoryName:s,variant:o})},this.variantChanged=t=>{const e=this.state;if(!e)return;const s=e.repositoryName,o="count"===t.target.value?"count":"delta";this.setState({repositoryName:s,variant:o})}}componentDidMount(){this.setState({repositoryName:this.props.repositoryName,variant:"count"})}componentDidUpdate(t){t.repositoryName!==this.props.repositoryName&&this.setState({repositoryName:this.props.repositoryName,variant:"count"})}render(){const t=this.state;if(!t)return(0,v.jsx)(v.Fragment,{});const e=this.props.downloads,s=t.repositoryName||"",o=t.variant,r=new m.CP({values:e}).parseDates(["data_at"]),u=r.getSeries("repository_name").distinct().toArray().sort(((t,e)=>{const s=t.replace("_","-"),o=e.replace("_","-");return s.localeCompare(o)})),x=this.props.open,y=this.props.classes;return(0,v.jsxs)(a.A,{open:x,fullScreen:!0,TransitionComponent:f,children:[(0,v.jsx)(n.A,{position:"static",children:(0,v.jsx)(i.A,{children:(0,v.jsxs)(h.A,{theme:C.a5,children:[(0,v.jsx)(p.A,{"aria-label":"Close",className:y.closeButton,onClick:this.props.onClose,children:(0,v.jsx)(N.A,{})}),(0,v.jsx)(c.A,{htmlFor:"repo",children:"Repository"}),"\xa0",(0,v.jsx)(d.A,{value:s,onChange:this.repoChanged,inputProps:{name:"repo",id:"repo"},children:u.map((t=>(0,v.jsx)(l.A,{value:t,children:t},t)))}),"\xa0\xa0",(0,v.jsx)(c.A,{htmlFor:"variant",children:"View"}),"\xa0",(0,v.jsxs)(d.A,{value:o,onChange:this.variantChanged,inputProps:{name:"variant",id:"variant"},children:[(0,v.jsx)(l.A,{value:"count",children:"Download count"}),(0,v.jsx)(l.A,{value:"delta",children:"Downloads / day"})]})]})})}),s?(0,v.jsx)(w,{downloadsDf:r,repositoryName:s,variant:o}):(0,v.jsx)(v.Fragment,{})]})}}const S=(0,u.A)((t=>({closeButton:{position:"absolute",right:t.spacing(1),top:t.spacing(1)}})))(D)}}]);
//# sourceMappingURL=734.6a4e0515.chunk.js.map